@model IEnumerable<TesoreriaVS12.Areas.Tesoreria.Models.Ca_ClasificaBeneficiariosModel>

@{
    ViewBag.Title = "Clasificación de BeneficiarioS";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Clasificación de Beneficiarios</h2>
<div id="_menu_lateral">
    @{ Html.RenderAction("Botonera", "Home", new { Area = "", ids = new List<object> {"bNuevo", "bImprimir", "bSalir" } }); }
</div>
<div class="jsSourceActions hide">
</div>
<div id="container">
    <br />
    <div class="row">
        @*<div class="col-sm-3 col-sm-offset-9 text-right">
            <div class="js_agregar btn btn-success">
                <i class="fa fa-plus bigger-110" title="Crear"></i>
                <span>Agregar</span>
            </div>
        </div>*@
    </div>

    <div class="row">
        <div class="col-sm-12">
            <table id="tbl" class="table table-responsive table-striped table-bordered">
                <thead>
                    <tr>
                        <th data-title="Descripcion">
                            Descripción
                        </th>
                        <th data-title="Ca_Cuentas.Id_CuentaFormato"  style="width:188px">
                            Cuenta
                        </th>
                        <th data-title="Ca_Cuentas.Nivel">
                            @Html.DisplayNameFor(model => model.Ca_Cuentas.Nivel)
                        </th>
                        <th data-title="Acciones" class="text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Descripcion)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Ca_Cuentas.Id_CuentaFormato)
                            </td>
                            <td>
                                @{
                                    if (item.Ca_Cuentas.Nivel == true)
                                    { 
                                                @Html.Encode("SI");
                                    }
                                    else
                                    {
                                                @Html.Encode("NO");
                                    }
                                } 
                            </td>
                            <td class="acciones">
                                <a class="js_detalles fa fa-file-text-o cursorPointer" data-id="@item.Id_ClasificaBene" title="Detalles" data-toggle="tooltip" data-placement="top"></a>
                                @*<a class="js_editar fa fa-pencil-square-o cursorPointer" data-id="@item.Id_ClasificaBene" title="Editar" data-toggle="tooltip" data-placement="top"></a>*@
                                <a class="js_eliminar fa fa-trash-o cursorPointer" data-id="@item.Id_ClasificaBene" title="Eliminar" data-toggle="tooltip" data-placement="top"></a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
@section scripts
{
    <script src="~/Scripts/underscore.js"></script>
    <script src="~/Scripts/Catalogos/Usuarios.js"></script>
<script src="~/Areas/Tesoreria/Scripts/Catalogos/Catalogos.js"></script>
    <script>
        var aPos = -1;
        var RutaAdd = "@Url.Action("V_ClasificaBeneficiario_Agregar", "Catalogos")";//"/Tesoreria/Catalogos/V_ClasificaBeneficiario_Agregar";
        var RutaEdit = "@Url.Action("V_ClasificaBeneficiario_Editar", "Catalogos")";//"/Tesoreria/Catalogos/V_ClasificaBeneficiario_Editar";
        var RutaDelete = "@Url.Action("V_ClasificaBeneficiario_Eliminar", "Catalogos")";//"/Tesoreria/Catalogos/V_ClasificaBeneficiario_Eliminar";
        var RutaExportarPDF = "@Url.Action("ClasificacionBeneficiario", "ReportesPDF")";//"/Tesoreria/ReportesPDF/ClasificacionBeneficiario";
        var TableId = "tbl";
        var FrmId = "frm";
        var Propiedades = '{ "Id": "response.Registro.Id_ClasificaBene" }';
        var MsjEliminar = "¿Esta seguro de eliminar la clasificación de beneficiario? esta acción no se puede deshacer";
        var SourceAction = "jsActionsource";

        $(function () {
            $("body").on("click", "#js_mImprimir", ExportarPDFCatalogo);
            ConstruirTabla(TableId, "No hay clasificaciones de beneficiario...");
            $("body").tooltip({ selector: "[data-toggle='tooltip']" });
            $("body").on("click", "#js_mNuevo", Nuevo);
            $("body").on("click", ".js_editar", Editar);
            $("body").on("click", ".js_eliminar", Eliminar);
            $("body").on("click", ".js_detalles", function () {
                customModal("@Url.Action("V_ClasificaBeneficiario_Detalles","Catalogos")", { Id: $(this).data("id") }, "GET", "size", "", "", "", "Cancelar", "Detalle beneficiario", "IdModal")
                //VentanaModal(1, "/Tesoreria/Catalogos/V_ClasificaBeneficiario_Detalles", { Id: $(this).data("id") }, "get", "");
            });
            $("#MyModal1").on("click", "#js_btnOk1", GuadarEditar);
            $("body").on("click", "#js_mSalir", function () {
                GoHome();
                return false;
            });
        });
        function GuadarEditar()
        {
            if($("#Id_ClasificaBene").val()==0)
            {
                if ($("#" + FrmId).valid())
                {
                    var f = buildFiltros();
                    $("#filters").val(JSON.stringify(f));
                    ajaxJson(RutaAdd, $("#" + FrmId).serialize(), "POST", true, callBackSave);
                }
            }
            else
            {
                GuardarEdit();
            }

        }
    </script>

    <script type="text/template" id="jsActionsource">
        <a class="js_detalles fa fa-file-text-o cursorPointer" data-id="<%= Id %>" title="Detalles" data-toggle="tooltip" data-placement="top"></a>
        @*<a class="js_editar fa fa-pencil-square-o cursorPointer" data-id="<%= Id %>" title="Editar" data-toggle="tooltip" data-placement="top"></a>*@
        <a class="js_eliminar fa fa-trash-o cursorPointer" data-id="<%= Id %>" title="Eliminar" data-toggle="tooltip" data-placement="top"></a>
    </script>

}

